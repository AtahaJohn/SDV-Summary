{% extends "base.html" %}
{% block header %}
{{super()}}
		<!-- Place this data between the <head> tags of your website -->
		<meta name="description" content="A summary of {{data.name}}'s Stardew Valley farm: {{data.farmName}} Farm" />

		<!-- Schema.org markup for Google+ -->
		<meta itemprop="name" content="{{data.farmName}} Farm Summary - SDV Summary">
		<meta itemprop="description" content="A summary of {{data.name}}'s Stardew Valley farm: {{data.farmName}} Farm">
		<meta itemprop="image" content="http://sdv.robheath.me.uk/{{data.portrait_url}}">

		<!-- Twitter Card data -->
		<meta name="twitter:card" content="http://sdv.robheath.me.uk/{{data.portrait_url}}">
		<meta name="twitter:site" content="@laukei">
		<meta name="twitter:title" content="{{data.farmName}} Farm Summary - SDV Summary">
		<meta name="twitter:description" content="A summary of {{data.name}}'s Stardew Valley farm: {{data.farmName}} Farm">
		<meta name="twitter:creator" content="@laukei">
		<!-- Twitter summary card with large image must be at least 280x150px -->
		<meta name="twitter:image:src" content="http://sdv.robheath.me.uk/{{data.portrait_url}}">

		<!-- Open Graph data -->
		<meta property="og:title" content="{{data.farmName}} Farm Summary - SDV Summary" />
		<meta property="og:type" content="profile" />
		<meta property="og:url" content="http://sdv.robheath.me.uk/{{data.url}}" />
		<meta property="og:image" content="http://sdv.robheath.me.uk/{{data.portrait_url}}" />
		<meta property="og:image" content="http://sdv.robheath.me.uk/{{data.avatar_url}}" />
		<meta property="og:image" content="http://sdv.robheath.me.uk/{{data.farm_url}}" />
		<meta property="og:description" content="A summary of {{data.name}}'s Stardew Valley farm: {{data.farmName}} Farm" />
		<meta property="og:site_name" content="Stardew Valley Summary" />
{% endblock %}

{% block title %}{{data.farmName}} Farm Summary - SDV Summary{% endblock %}
{% block bodycontent %}
			<div class="col-md-12 col-sm-12 panel">
				<div class="interiorpanel">
					<div class="col-md-2 col-sm-12 text-center">
						<a href="/">
								<img src="{{url_for('static', filename='favicon.png')}}" class="logo">
						</a>
					</div>
					<div class="col-md-8 col-sm-12">
						<h1 class="text-center">{{ data.farmName }} Farm</h1>
						{% if others %}
							<div class="row center-block">
								<ul class="list-inline text-center">
								{% for other in others %}
									{% if other.0 == data.url %}
									<li><b>{{ other.1 }}</b></li>
									{% else %}
									<li><a href="/{{ other.0 }}" >{{ other.1 }}</a></li>
									{% endif %}
								{% endfor %}
								</ul>
							</div>
						{% endif %}
						{% if deletable %}
						<ul class="list-inline text-center"><li>Delete:</li><li><a href="{{data.url}}/del">this page</a>?</li>{% if others|length > 1 %}<li><a href="{{data.url}}/delall">all for this farm</a>?</li>{% endif %}</ul>
						{% endif %}
					</div>
				</div>
			{% if error %}
				<p class="text-danger text-center"><strong>Error:</strong> {{ error }}</p>
			{% endif %}
			</div>
			<div class="row center-block">				
				<div class="col-md-8 col-sm-12 panel text-center">
					<div class="interiorpanel tabbable">
						<ul class="nav nav-pills nav-justified" style="margin-bottom: 15px;">
							<li class="active"><a href="#playerInfo" data-toggle="pill">Player</a></li>
							<li><a href="#familyPortrait" data-toggle="pill">Family</a></li>
							<li><a href="#skills" data-toggle="pill">Skills</a></li>
						</ul>
						<div class="tab-content">
							<div id="playerInfo" class="tab-pane active">
								<div class="col-sm-5">
									<div class="avatarPanel">
										<img src="{{ data.avatar_url }}" class="playerAvatar">
									</div>
								</div>
								<div class="col-sm-7 ">
									<dl class="dl-horizontal">
										<dt>Name</dt><dd>{{ data.name }}</dd>
										<dt>Current Funds</dt><dd>{{ data.money }}g</dd>
										<dt>Total Earnings</dt><dd>{{ data.totalMoneyEarned }}g</dd>
										<dt>Gender</dt><dd>{% if data.isMale == 'true' %} Male {% else %} Female {% endif %}</dd>
										</dd>
										<dt>Favorite Thing</dt><dd>{{ data.favoriteThing }}</dd>
										<dt>Health</dt><dd>{{ data.maxHealth }}</dd>
										<dt>Stamina</dt><dd>{{ data.maxStamina }}</dd>
										<dt>Steps Taken</dt><dd>{{ data.statsStepsTaken }}</dd>
										<dt>Max Mine Depth</dt><dd>{{ data.deepestMineLevel }}</dd>
		 								<dt>Time Played</dt><dd>{{ data.millisecondsPlayed }} hours</dd>
		 							</dl>
								</div>
							</div>
							<div id="familyPortrait" class="tab-pane">

								<div class="col-sm-5 col-xs-12">
									<div class="portraitPanel">
										<img src="{{ data.portrait_url }}" class="playerPortrait">
									</div>
								</div>
								<div class="col-sm-7 col-xs-12">
									<p>
									{% if data.portrait_info['partner'] != None %}
										{{data.name}} is married to {{ data.portrait_info['partner'] }}{%if data.petName!=None%},{%else%}and{%endif%}
									{% else %}
										{{data.name}} is unmarried{%if data.petName!=None%},{%else%}and{%endif%}
									{%endif%}
									{% if data.portrait_info['children']|length > 0 %}
										{% for child in data.portrait_info['children'] %}
										{%if loop.index0 == 0 %}has{%else%}and{%endif%} a {{ child[2] }} day old {% if child[0] == 0 %}son{%else%}daughter{%endif%} named {{ child[3] }}{% endfor %}{%if loop.last and data.petName!=None%},{%endif%} 
									{% else %}
										has no children{%if data.petName!=None%},{%endif%} 
									{%endif%}
									and
									{%if data.petName != None %}
									{#{% if data.portrait_info['partner'] != None or data.portrait_info['children']|length > 0 %}the family{%elif data.isMale=='true'%}he{%else%}she{%endif%}#} has pet {% if data.catPerson == 'true' %} cat {% else %} dog {% endif %} named {{ data.petName }}.</p>
									{%endif%}
									</p>
								</div>
								<div class="col-sm-12 col-xs-12">
									{% if data.animals %}
									<h3>Farm Animals</h3>
									<dl class="text-left">
										{% for key in data.animals.keys() %}
											<dt>{{data.animals[key]|length}} {{key}}{% if data.animals[key]|length>1 %}s{% endif %}:</dt>
											<dd>
												<ul class="list-unstyled">
													{% for row in data.animals[key] %}
														<li style="padding-left:1em;">{{row[0]}}, {{row[1]}} days old</li>
													{% endfor %}
												</ul>
											</dd>
										{% endfor %}
									</dl>
									{% endif %}
								</div>
							{#
							<dl>
							{% for pair in data|dictsort %}
							<dt>{{pair.0}}</dt>
							<dd>{{pair.1}}</dd>
							<br>
							{% endfor %}
							</dl>#}
							</div>
							<div id="skills" class="tab-pane">
								<div class="col-sm-12">
									<!-- start -->
									{% for skill in [('Farming',data.farmingLevel),('Mining',data.miningLevel),('Foraging',data.foragingLevel),('Fishing',data.fishingLevel),('Combat',data.combatLevel)] %}
										<div class="row">
											<div class="col-sm-4"><p>{{skill[0]}}</p></div>
											<div class="col-sm-8 col-xs-12">
												<div class="col-xs-12" style="margin: 5px 0;display:inline;">
													{% for level in range(skill[1]) %}
														{% if (level + 1) % 5 != 0 %}
														<img src="{{url_for('static', filename='images/skills/point_active.png')}}">
														{% else %}
														<img src="{{url_for('static', filename='images/skills/profession_active.png')}}">
														{% endif %}
													{% endfor %}
													{% for level in range(skill[1] + 1, 11) %}
														{% if (level) % 5 != 0 %}
														<img src="{{url_for('static', filename='images/skills/point_inactive.png')}}">
														{% else %}
														<img src="{{url_for('static', filename='images/skills/profession_inactive.png')}}">
														{% endif %}
													{% endfor %}
												</div>
											</div>
										</div>
									{% endfor %}
								</div>
								{% set professions = [data.professions0,data.professions1,data.professions2,data.professions3,data.professions4,data.professions5,data.professions6,data.professions7,data.professions8,data.professions9] %}
								<div class="col-sm-12" style="margin-top: 10px;">	
										<h3>Professions</h3>
										{% for profession in professions %}
											{% if profession != None %}
												<div class="col-sm-6">
													<p>{{profession}}</p>
												</div>
											{% endif %}
										{% endfor %}
								</div>
							</div>
						</div>

						<script>
							$(document).ready(function () {
								$('#myTab a:last').tab('show')
							})
						</script>
					</div>
				</div>
				<div class="col-md-4 col-sm-12 panel"><!--col-md-offset-1-->
						<div class="interiorpanel text-center">
							<h3>Minimap</h3>
							<a href="#mainFarm"><img src="{{ data.farm_url }}" class="img-responsive farmImg" style="image-rendering: pixelated;" height="auto"></a>
						</div>					
				</div>
			</div>
			<div class="row center-block">
				<div class="col-md-8 col-sm-12 panel">
					<div class="interiorpanel">	
						<div class="col-md-12 text-center">
							<h3>Friendships</h3>
						</div>
						{% for i in range((friendships|length/2)|int) %}
						<div class="col-md-6 col-sm-12 col-xs-12 text-center">							
							<p style="margin-left: 1em;">{{ friendships[2*i].0 }}: {{ friendships[2*i].1 // 250 }}/10</p>
						</div>
						<div class="col-md-6 col-sm-12 col-xs-12 text-center">							
							<p style="margin-left: 1em;">{{ friendships[2*i + 1].0 }}: {{ friendships[2*i + 1].1 // 250 }}/10</p>
						</div>
						{% endfor %}
					</div>
				</div>

				<div class="col-md-4 panel">
					<div class="interiorpanel text-center">
						<h3>Monster Kills</h3>
						<div id="stats">
						{% if kills %}
							<ul class="list-unstyled">
							{% for kill in kills %}
							<li>{{ kill.0 }}: {{ kill.1 }}</li>
							{% endfor %}
							</ul>
						{% else %}
							<p> {{ data.name }} has not killed any monsters yet. </p>
						{% endif %}
						</div>
					</div>
				</div>
			</div>
			<div class="row center-block panel hidden-sm hidden-xs">
				<a name="mainFarm"></a>
				<div class="interiorpanel">
					<div class="col-md-12 text-center">
						<h3>Map of {{data.farmName}} Farm</h3>
						<img src="{{ data.farm_url }}" class="img-responsive farmImg" style="image-rendering: pixelated;" height="auto">
					</div>
				</div>
			</div>
			{% endblock %}